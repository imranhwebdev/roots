<div id="customer-password-manager">
  {% if customer %}
    <!-- Logged In: Redirect to Recover Page -->
    <form id="redirect-recover-form" class="grid grid-cols-1 gap-4">
      <div>
        <label class="block text-[#514849] text-lg lg:text-[22px] mb-2 font-medium !leading-[1.25]"
          >Current Password (for reference)*</label
        >
        <input
          type="password"
          name="current_password"
          placeholder="Enter current password"
          class="w-full text-lg lg:text-xl !leading-[1.2] text-[#797375] placeholder:text-[#797375] border lg:border-[1.2px] border-[#E3E2E0] bg-[#FCFBF7] py-4 lg:py-5 px-5 lg:px-6 rounded-lg transition-all duration-200 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 focus:outline-none"
        >
      </div>

      <div>
        <button
          type="submit"
          class="btn hover:!text-white hover:bg-green transition-all duration-300"
        >
          Change Password
        </button>
      </div>
    </form>

    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const form = document.getElementById('redirect-recover-form');
        form.addEventListener('submit', function (e) {
          e.preventDefault();
          // Logged-in customer redirected to recover page
          window.location.href = '/account/logout?return_url=/account/login#recover';
        });
      });
    </script>

  {% else %}
    <!-- Logged Out: Send Reset Link Form -->
    <p class="text-base text-[#797375] mb-4">Forgot your password? Enter your email below to receive a reset link.</p>
    <form
      id="recover-password-form"
      method="post"
      action="{{routes.account_recover_url}}"
      class="grid grid-cols-1 gap-4"
    >
      <input type="hidden" name="form_type" value="recover_customer_password">
      <input type="hidden" name="utf8" value="âœ“">

      <div>
        <label for="customer-email" class="block text-[#514849] text-lg mb-2 font-medium">Email*</label>
        <input
          id="customer-email"
          name="email"
          type="email"
          placeholder="Enter your email"
          class="w-full text-lg text-[#797375] placeholder:text-[#797375] border border-[#E3E2E0] py-3 px-4 rounded-lg"
          required
        >
      </div>

      <div>
        <button type="submit" class="btn !py-3 !px-6 bg-[#1E6C44] text-white rounded-lg">Send Reset Link</button>
      </div>
    </form>
  {% endif %}
</div>
