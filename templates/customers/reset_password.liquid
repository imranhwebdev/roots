<div class="account-section">
  <div class="form-container">
    <h2 class="section-title">Create New Password</h2>
    <p class="section-description">Enter your new password below.</p>

    {% form 'reset_customer_password' %}
      <input type="hidden" name="reset_password_token" value="{{ reset_password_token }}">

      {% if form.errors %}
        <div class="form-errors">
          {% for field in form.errors %}
            <p>{{ form.errors.messages[field] }}</p>
          {% endfor %}
        </div>
      {% endif %}

      <label for="Password">New Password</label>
      <input type="password" name="customer[password]" id="Password" required>

      <label for="PasswordConfirmation">Confirm Password</label>
      <input type="password" name="customer[password_confirmation]" id="PasswordConfirmation" required>

      <p id="password-strength" class="text-sm mt-2"></p>
      <p id="password-match" class="text-sm mt-1"></p>

      <button type="submit" class="btn-primary">Create New Password</button>
    {% endform %}
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const password = document.getElementById('Password');
    const confirmPassword = document.getElementById('PasswordConfirmation');
    const strengthText = document.getElementById('password-strength');
    const matchText = document.getElementById('password-match');

    function checkStrength(value) {
      let strength = 0;
      if (value.length >= 8) strength++;
      if (/[A-Z]/.test(value)) strength++;
      if (/[0-9]/.test(value)) strength++;
      if (/[^A-Za-z0-9]/.test(value)) strength++;

      if (strength <= 1) return 'Weak password ❌';
      if (strength == 2) return 'Medium strength ⚠️';
      if (strength >= 3) return 'Strong password ✅';
    }

    password.addEventListener('input', function () {
      strengthText.textContent = checkStrength(password.value);
    });

    confirmPassword.addEventListener('input', function () {
      if (confirmPassword.value !== password.value) {
        matchText.textContent = 'Passwords do not match ❌';
      } else {
        matchText.textContent = 'Passwords match ✅';
      }
    });
  });
</script>
