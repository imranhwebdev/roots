<div class="blog-details pt-9 pb-10 md:pb-16 lg:pb-20 2xl:pb-25">
  <div class="container">
    <!-- Breadcrumb -->
    <p class="text-lg lg:text-xl text-[#797375] flex items-center mb-5 lg:mb-6 xl:mb-8.5">
      <a href="{{ blog.url }}" class="hover:underline">Blog</a>
      <span>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none">
          <path d="M9.55556 17L14 12L9.55556 7" stroke="#797375" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </span>
      <span class="text-[#514849] font-medium ">{{ article.title }}</span>
    </p>

    <div class="blog-details-all">
      <!-- Featured Image + Title -->
      {% if section.settings.show_featured_image and article.image %}
        <div
          class="
            relative
            before:absolute before:w-full before:h-full before:left-0 before:bottom-0 before:bg-[linear-gradient(180deg,rgba(34,30,13,0.00)_66.54%,rgba(34,30,13,0.60)_100%)] before:z-1 overflow-hidden z-1 bg-[linear-gradient(180deg,_rgba(34,30,13,0.00)_66.54%,_rgba(34,30,13,0.60)_100%)] rounded-xl md:rounded-2xl lg:rounded-[20px] mb-5 lg:mb-6 xl:mb-8
          "
        >
          <h1 class="blog-title text-white text-lg max-w-275 pr-[2%] md:text-3xl lg:text-4xl xl:text-5xl absolute z-2 bottom-2 md:bottom-4 xl:bottom-6 left-2 md:left-5 lg:left-10 2xl:left-12 font-medium !leading-[1.4]">
            {{ article.title | strip_html | truncate: 70 }}
          </h1>
          <img
            src="{{ article.image | img_url: 'master' }}"
            class="              w-full aspect-[1/.455] rounded-xl md:rounded-2xl lg:rounded-[20px]"
            width=""
            height=""
            alt="{{ article.image.alt | escape }}"
            loading="lazy"
          >
        </div>
      {% endif %}

      <!-- Meta Info -->
      <div class="flex flex-col md:flex-row md:flex-nowrap flex-wrap md:items-center md:justify-between gap-5 pb-4 lg:pb-5 xl:pb-6 border-b border-b-[#E3E2E0]">
        {% if section.settings.show_author or section.settings.show_date %}
          <div class="flex items-center gap-3">
            <img
              src="https://i.pravatar.cc/100"
              class="size-13 lg:size-15 rounded-full"
              alt="{{ article.author }}"
            >
            <div>
              {% if section.settings.show_author %}
                <p class="text-lg lg:text-xl font-medium mb-1 text-[#0D2E1D]">{{ article.author }}</p>
              {% endif %}
              {% if section.settings.show_date %}
                <p class="text-base xl:text-lg text-[#797375]">
                  {{ article.published_at | date: section.settings.date_format }}
                </p>
              {% endif %}
            </div>
          </div>
        {% endif %}

        {% if section.settings.show_tags %}
          <div class="flex items-center gap-3">
            {% if article.tags.size > 0 %}
              <p class="text-sm lg:text-base text-[#514849] uppercase tracking-[1.92px] bg-[#F0F0F0] py-2 px-4 rounded-xl">
                {{ article.tags.first }}
              </p>
            {% endif %}
            <p class="text-base lg:text-lg text-[#797375]">
              {{ article.content | strip_html | split: ' ' | size | divided_by: 200 }} min read
            </p>
          </div>
        {% endif %}

        {% if section.settings.enable_share %}
          <!-- Share -->
          <div>
            <p class="text-base lg:text-xl font-medium mb-3 lg:mb-4">Share this post</p>
            <div class="flex items-center gap-2">
              {% assign share_url = article.url | prepend: shop.url %}
              <a
                href="https://www.instagram.com/?url={{ share_url | url_encode }}"
                target="_blank"
                class="flex items-center justify-center size-8 lg:size-9 rounded-full bg-[#F0F0F0] p-2"
              >
                <img src="{{ 'Instagram.png' | asset_url }}" alt="Instagram">
              </a>
              <a
                href="https://twitter.com/share?url={{ share_url | url_encode }}&text={{ article.title | url_encode }}"
                target="_blank"
                class="flex items-center justify-center size-8 lg:size-9 rounded-full bg-[#F0F0F0] p-2"
              >
                <img src="{{ 'x.png' | asset_url }}" alt="Twitter">
              </a>
              <a
                href="https://www.facebook.com/sharer/sharer.php?u={{ share_url | url_encode }}"
                target="_blank"
                class="flex items-center justify-center size-8 lg:size-9 rounded-full bg-[#F0F0F0] p-2"
              >
                <img src="{{ 'Facebook.png' | asset_url }}" alt="Facebook">
              </a>
            </div>
          </div>
        {% endif %}
      </div>

      <!-- Article Content + Sidebar -->
      <div class="flex flex-col md:flex-row gap-5 mt-8 md:mt-10">
        <div class="w-full md:w-8/12">
          <div class="prose max-w-none">
            {{ article.content }}
          </div>
        </div>

        <!-- Sidebar Popular posts -->
        {% if section.settings.enable_related %}
          <div class="w-full md:w-4/12 lg:w-3/12">
            <h5 class="text-[#0D2E1D] text-2xl lg:text-3xl xl:text-4xl font-medium mb-6 lg:mb-8">Popular Post</h5>
            <div class="card-area">
              {% assign count = 0 %}
              {% for post in blog.articles %}
                {% if post.id != article.id %}
                  <div class="mb-8 border-b border-[#F0F0F0] pb-6">
                    <div class="px-3 pt-3 pb-6 bg-white rounded-lg">
                      {% if post.image %}
                        <div class="w-full aspect-[1/.68] mb-4">
                          <img
                            src="{{ post.image | img_url: '400x' }}"
                            class="size-full rounded-[10px]"
                            alt="{{ post.title }}"
                          >
                        </div>
                      {% endif %}
                      <div class="px-1">
                        <p class="text-[#797375] text-sm uppercase mb-2.5">
                          {{ post.published_at | date: '%d %B, %Y' }}
                          <span class="text-[#103C25]">BY {{ post.author }}</span>
                        </p>
                        <h6 class="text-[#0D2E1D] text-lg font-medium mb-3">
                          {{ post.title | strip_html | truncate: 55 }}
                        </h6>
                        <p class="text-[#514849] text-sm mb-4">
                          {{ post.excerpt | strip_html | truncatewords: 15 }}
                        </p>
                        <a
                          href="{{ post.url }}"
                          class="text-[#967901] text-sm font-medium hover:text-[#0D2E1D] flex items-center gap-2"
                        >
                          Learn More
                          <svg xmlns="http://www.w3.org/2000/svg" width="17" height="13" fill="none">
                            <path d="M10.332 1L15.832 6.5M15.832 6.5L10.332 12M15.832 6.5L1.16536 6.5" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
                          </svg>
                        </a>
                      </div>
                    </div>
                  </div>
                  {% assign count = count | plus: 1 %}
                  {% if count >= section.settings.related_limit %}
                    {% break %}
                  {% endif %}
                {% endif %}
              {% endfor %}
            </div>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Article Details",
  "settings": [
    { "type": "checkbox", "id": "show_author", "label": "Show Author", "default": true },
    { "type": "checkbox", "id": "show_date", "label": "Show Date", "default": true },
    { "type": "text", "id": "date_format", "label": "Date Format", "default": "%B %d, %Y" },
    { "type": "checkbox", "id": "show_tags", "label": "Show Tags", "default": true },
    { "type": "checkbox", "id": "show_featured_image", "label": "Show Featured Image", "default": true },
    { "type": "checkbox", "id": "enable_share", "label": "Enable Share Buttons", "default": true },
    { "type": "checkbox", "id": "enable_related", "label": "Show Related Articles", "default": true },
    {
      "type": "range",
      "id": "related_limit",
      "label": "Number of Related Articles",
      "min": 1,
      "max": 6,
      "step": 1,
      "default": 3
    }
  ]
}
{% endschema %}
