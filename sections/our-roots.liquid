<!-- sections/video-banner.liquid -->
<div class="out-rooms py-17.5 md:py-20 lg:py-25 xl:py-30 2xl:py-35">
  <div class="container">
    <!-- Title + Description -->
    <div class="flex justify-center mb-8 md:mb-12 lg:mb-15">
      <div class="section-title text-center w-full md:w-10/12 xl:w-8/12">
        <h2 class="text-2xl md:text-3xl lg:text-4xl xl:text-[44px] text-green !leading-[1.25] font-bold font-armany-bold mb-4">
          {{ section.settings.heading }}
        </h2>
        <p class="lg:px-10 text-base md:text-lg lg:text-xl font-poppins !leading-[1.6] text-secondary mb-6">
          {{ section.settings.description }}
        </p>

        {% if section.settings.button_text != blank %}
          <a href="{{ section.settings.button_link }}" class="btn flex items-center gap-3 mx-auto max-w-max">
            {{ section.settings.button_text }}
            <svg width="17" height="13" viewBox="0 0 17 13" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M10.332 1L15.832 6.5M15.832 6.5L10.332 12M15.832 6.5L1.16536 6.5" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </a>
        {% endif %}
      </div>
    </div>

    <!-- Video -->
    <div class="w-10/12 mx-auto">
      <div class="relative w-full h-[500px]">
        {% if section.settings.poster_image != blank %}
          <img
            src="{{ section.settings.poster_image | image_url: width: 1600 }}"
            width=""
            height=""
            alt="Video poster"
            class="w-full h-full object-cover rounded-xl"
          >
        {% endif %}

        <button
          id="playBtn-{{ section.id }}"
          class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 bg-white p-4 rounded-full shadow-lg"
        >
          ▶
        </button>

        <div id="videoWrapper-{{ section.id }}" class="absolute inset-0 hidden">
          <iframe
            id="youtube-{{ section.id }}"
            class="w-full h-full rounded-xl"
            src=""
            title="YouTube video"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen
          ></iframe>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const playBtn = document.getElementById('playBtn-{{ section.id }}');
    const wrapper = document.getElementById('videoWrapper-{{ section.id }}');
    const iframe = document.getElementById('youtube-{{ section.id }}');

    if (playBtn) {
      playBtn.addEventListener('click', () => {
        const url = '{{ section.settings.youtube_url }}';
        const videoId = url.split('v=')[1]?.split('&')[0];
        iframe.src = 'https://www.youtube.com/embed/' + videoId + '?autoplay=1&rel=0';
        wrapper.classList.remove('hidden');
        playBtn.style.display = 'none';
      });
    }
  });
</script>

{% schema %}
{
  "name": "Video Banner",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Our Roots, Your Ritual"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "At Roots, we celebrate nature’s healing power and timeless self-care..."
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "Learn More About Us"
    },
    {
      "type": "text",
      "id": "button_link",
      "label": "Button Link",
      "default": "#"
    },

    {
      "type": "url",
      "id": "youtube_url",
      "label": "YouTube URL",
      "default": "/"
    },
    {
      "type": "image_picker",
      "id": "poster_image",
      "label": "Poster Image"
    }
  ],
  "presets": [
    {
      "name": "Video Banner"
    }
  ]
}
{% endschema %}
